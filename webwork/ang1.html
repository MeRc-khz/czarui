<!DOCTYPE HTML>
<HTML>
<head>
<meta charset="UTF-8">
<style type="text/css">
html {
	height:100%;
}
body {
	height:100%;
	margin:0px;
}
.fScreen{
	float:left;
	height:500px;
	width:500px;

}
</style>
</head>
<body>
<div id="candiv"><canvas id="canvas" width="1440" height="880">!supported</canvas></div>
<script type = "text/javascript">
var wHeight = window.innerHeight;
var wWidth = window.innerWidth;
window.addEventListener('load', winloaded, false);
function winloaded(){
var candiv=document.getElementById('candiv');
var cvs=document.getElementById('canvas');
	cvs.height = wHeight;
	cvs.width = wWidth;
	//oWidth and oHeight if/else statement for mobile web browsers
	//assign width height canvas values according to screen orientation
	//user agent detection script
	//hit
app();

}
function app(){
var cvs=document.getElementById('canvas');
if(!cvs || !cvs.getContext){
return;
}
var ctx = cvs.getContext("2d");
if(!ctx){
return;
}
var mouseX = 0;
var mouseY = 0;
var inc;
var dec;
var mAngle = 0;
var old_mAngle;
var neg90 = -90;
var neg45 = -45;
var aZero = 0;
var pos45 = 45;
var pos90 = 90;
var mCoord ={x:0,y:0};
var touches = [];
var arcPath = {x:250, y:250,r: 200, angle: 0};
var arcCenter = {x:250, y:250,r: 5, angle: 0};
var arcZero = {x:arcCenter.x + arcPath.r , y:arcCenter.y,r: 5, angle: 0};

var a45 = .7854;
var y270 = arcPath.y - arcPath.r - 50;
var y90 = arcPath.y + arcPath.r + 50;
var x0 = arcPath.x + arcPath.r + 50;
var ball = [{x:0, y:0,r:50},{x:0, y:0,r:50},{x:0, y:0,r:50},{x:0, y:0,r:50},{x:0, y:0,r:50}];

//x:cosine(arcCenter.x(250),neg90a(-90),arcPath.r(200))
function cosine(xVal,angVal,radVal){
var cosVal;
cosVal = xVal + Math.cos(angVal) * radVal;

return cosVal;
}
//
//y:sine(arcCenter.y,neg90a,arcPath.r)
function sine(yVal, angVal, radVal){	
var sineVal;
sineVal = yVal + Math.sin(angVal) * radVal
return sineVal;
}

function findDistance(p1,p2){
var dx = p2.x - p1.x;
var dy = p2.y - p1.y;
var distance = Math.sqrt(dx*dx + dy*dy);

return distance;

}
//find the angle of three points on the canvas
function find_angle(p0,p1,c) {
    var p0c = Math.sqrt(Math.pow(c.x-p0.x,2)+
                        Math.pow(c.y-p0.y,2)); // p0->c (b)   
    var p1c = Math.sqrt(Math.pow(c.x-p1.x,2)+
                        Math.pow(c.y-p1.y,2)); // p1->c (a)
    var p0p1 = Math.sqrt(Math.pow(p1.x-p0.x,2)+
                         Math.pow(p1.y-p0.y,2)); // p0->p1 (c)
    return Math.acos((p1c*p1c+p0c*p0c-p0p1*p0p1)/(2*p1c*p0c));
}

function eMouseMove(event) {	
        if (event.layerX || event.layerX == 0) {
		    mCoord.x = event.pageX;
            mCoord.y = event.pageY;
            //mouseX = event.layerX;
            //mouseY = event.layerY;
        } else if (event.offsetX || event.offsetX == 0) {
            mCoord.x = event.offsetX;
            mCoord.y = event.offsetY;
        }
		
    }
function change_angles(newAngle) {
    //check if we should increment or decrement
    if (newAngle == "inc") {
        //two plus signs will increment our variable by one
        neg90--;
		neg45--;
		aZero--;
		pos45--;
		pos90--;
    } else if (newAngle == "dec") {
        //two minus signs will decrement our variable by one
       neg90++;
	   neg45++; //degrees or radian coversion is to fast
	   aZero++;
	   pos45++;
	   pos90++;
    }
}

function draw(){
//calculate the 45 and 90 degree angles based on mCoord xy being == to 0 degrees. scratch that
var neg90a = neg90 * Math.PI / 180;
var neg45a = neg45 * Math.PI / 180;
var zero0a = aZero * Math.PI / 180;
var pos45a = pos45 * Math.PI / 180;
var pos90a = pos90 * Math.PI / 180;


if(mAngle!=old_mAngle){
if(mAngle < old_mAngle){

change_angles('inc');
}else{

change_angles('dec');
}
old_mAngle = mAngle;

}
ctx.fillStyle ='#eeeeee';
ctx.fillRect(0,0, canvas.width, canvas.height);
ctx.strokeStyle='#000000';
ctx.strokeRect(0,0,canvas.width, canvas.height);

ctx.fillStyle = "#000000";
ctx.beginPath();
ctx.arc(arcCenter.x,arcCenter.y,arcCenter.r,0,Math.PI*2,true);
ctx.fill();
ctx.closePath();

ctx.strokeStyle = "#000000";
ctx.beginPath();
ctx.arc(arcPath.x,arcPath.y,arcPath.r,0,Math.PI*2,true);
ctx.stroke();
ctx.closePath();

ctx.strokeStyle = "#000000";
ctx.lineWidth = 3;
ctx.beginPath();
ctx.moveTo(arcCenter.x,arcCenter.y);
ctx.lineTo(arcZero.x,arcZero.y);
ctx.stroke();
ctx.closePath();

ctx.strokeStyle = "#000000";
ctx.lineWidth = 3;
ctx.beginPath();
ctx.moveTo(arcCenter.x,arcCenter.y);
ctx.lineTo(mCoord.x,mCoord.y);
ctx.stroke();
ctx.closePath();

ctx.fillStyle = "#000000";
ctx.beginPath();
ctx.arc(arcZero.x,arcZero.y,arcZero.r,0,Math.PI*2,true);
ctx.fill();
ctx.closePath();

if(mCoord.y > y270 && mCoord.y < arcPath.y && mCoord.x <= x0){
    mAngle = -(find_angle(mCoord,arcZero,arcPath));
	}else if(mCoord.y > arcPath.y && mCoord.y < y90 && mCoord.x <=x0){
	mAngle = find_angle(mCoord,arcZero,arcPath);
	}

//mAngle = find_angle(mCoord,arcZero,arcPath);

mTangent = Math.atan((mCoord.x-arcZero.x)/(mCoord.y- arcZero.y))/(Math.PI/180);

//clutch.x = cosine(arcPath.x, nuRadius, arcPath.r);
//clutch.y = sine(arcPath.y,nuRadius,arcPath.r);

var pOnArc = {x:cosine(arcCenter.x,mAngle,arcPath.r),y:sine(arcCenter.y,mAngle,arcPath.r)};

var pOnArc1 = {x:cosine(arcCenter.x,neg90a,arcPath.r),y:sine(arcCenter.y,neg90a,arcPath.r)};
console.log("point X: " + pOnArc1.x + " point Y: " + pOnArc1.y);

var pOnArc2 = {x:cosine(arcCenter.x,neg45a,arcPath.r),y:sine(arcCenter.y,neg45a,arcPath.r)};
console.log("point X: " + pOnArc2.x + " point Y: " + pOnArc2.y);

var pOnArc3 = {x:cosine(arcCenter.x,zero0a,arcPath.r),y:sine(arcCenter.y,zero0a,arcPath.r)};
console.log("point X: " + pOnArc3.x + " point Y: " + pOnArc3.y);

var pOnArc4 = {x:cosine(arcCenter.x,pos45a,arcPath.r),y:sine(arcCenter.y,pos45a,arcPath.r)};
console.log("point X: " + pOnArc4.x + " point Y: " + pOnArc4.y);

var pOnArc5 = {x:cosine(arcCenter.x,pos90a,arcPath.r),y:sine(arcCenter.y,pos90a,arcPath.r)};
console.log("point X: " + pOnArc5.x + " point Y: " + pOnArc5.y);

ctx.fillStyle = "#000000";
ctx.beginPath();
ctx.arc(pOnArc1.x,pOnArc1.y,15,0,Math.PI*2,true);
ctx.fill();
ctx.closePath();

ctx.strokeStyle = "#0bg700";
ctx.beginPath();
ctx.arc(pOnArc2.x,pOnArc2.y,15,0,Math.PI*2,true);
ctx.stroke();
ctx.closePath();

ctx.fillStyle = "#000000";
ctx.beginPath();
ctx.arc(pOnArc3.x,pOnArc3.y,15,0,Math.PI*2,true);
ctx.fill();
ctx.closePath();

ctx.fillStyle = "#000000";
ctx.beginPath();
ctx.arc(pOnArc4.x,pOnArc4.y,15,0,Math.PI*2,true);
ctx.fill();
ctx.closePath();

ctx.fillStyle = "#000000";
ctx.beginPath();
ctx.arc(pOnArc5.x,pOnArc5.y,15,0,Math.PI*2,true);
ctx.fill();
ctx.closePath();

ctx.fillStyle = "#000000";
ctx.beginPath();
ctx.arc(pOnArc.x,pOnArc.y,arcZero.r,0,Math.PI*2,true);
ctx.fill();
ctx.closePath();

ctx.font= "20px serif";
ctx.fillStyle = "#000000";
ctx.fillText("MouseX: " + mCoord.x + " MouseY: " + mCoord.y, arcPath.x, arcPath.y + arcPath.r + 50);

ctx.font= "20px serif";
ctx.fillStyle = "#000000";
ctx.fillText("Angle of mouse: " + mAngle/Math.PI * 180, arcPath.x, arcPath.y + arcPath.r + 100);

ctx.font= "20px serif";
ctx.fillStyle = "#000000";
ctx.fillText("old Angle of mouse: " + old_mAngle/Math.PI * 180, arcPath.x, arcPath.y + arcPath.r + 125);

ctx.font= "20px serif";
ctx.fillStyle = "#000000";
ctx.fillText("Tangent of mouse: " + mTangent, arcPath.x, arcPath.y + arcPath.r + 150);

ctx.font= "20px serif";
ctx.fillStyle = "#000000";
ctx.fillText("arc x Val: " + pOnArc.x + " arc y Val: " + pOnArc.y, arcPath.x, arcPath.y + arcPath.r + 200);

cvs.addEventListener('mousemove', eMouseMove, false);
//cvs.addEventListener('mousedown', eClicked, false);
//cvs.addEventListener('mouseup', eClacked, false);
 
}	
const FRAME_RATE = 30;
var intervalTime = 1000/FRAME_RATE;
setInterval(draw, intervalTime);
}
</script>
</body>
</HTML>