<!DOCTYPE HTML>
<HTML>
<head>
<meta charset="UTF-8">
<style type="text/css">
</style>
</head>
<body>
<div id="candiv" style="position: absolute; top: 50px; left: 50px;">
<canvas id="canvas" width="500" height="500">
!supported
</canvas>
</div>
<script type = "text/javascript">
window.addEventListener('load', winloaded, false);
function winloaded(){
app();
}
function app(){
var canv = document.getElementById("canvas");
if(!canv || !canv.getContext){
return;
}
var ctx = canv.getContext("2d");
if(!ctx){
return;
}
function find_angle(p0,p1,c) {
    var p0c = Math.sqrt(Math.pow(c.x-p0.x,2)+
                        Math.pow(c.y-p0.y,2)); // p0->c (b)   
    var p1c = Math.sqrt(Math.pow(c.x-p1.x,2)+
                        Math.pow(c.y-p1.y,2)); // p1->c (a)
    var p0p1 = Math.sqrt(Math.pow(p1.x-p0.x,2)+
                         Math.pow(p1.y-p0.y,2)); // p0->p1 (c)
    return Math.acos((p1c*p1c+p0c*p0c-p0p1*p0p1)/(2*p1c*p0c));
}
var mouseX;
var mouseY;
var cAngle = 0;
var cRadius = 0;
var circle = {ctrX:0, ctrY: 250,radius: 100, angle: 0};
var y270 = circle.ctrY - circle.radius;
var y90 = circle.ctrY + circle.radius;
var ball1 = {x:0, y:0, speed: .02};
var ball2 ={x:0, y:0, speed: .02};
var p1 ={x:circle.ctrX, y:circle.ctrY}; //center point constant
var p2 = {x: mouseX, y:mouseY}; //point from mouse coordinates
var p3 = {x:circle.ctrX + circle.radius, y:circle.ctrY}; //raidius point
function draw(){
var p2 = {x: mouseX, y:mouseY}; //point for mouse
var p3 = {x:circle.ctrX + circle.radius, y:circle.ctrY}; //raidius point
function eMouseMove(event) {	
        if (event.layerX || event.layerX == 0) {
            mouseX = event.layerX;
            mouseY = event.layerY;
        } else if (event.offsetX || event.offsetX == 0) {
            mouseX = event.offsetX;
            mouseY = event.offsetY;
        }
    }
	if(mouseY > y270 && mouseY < circle.ctrY){
    cAngle = -(find_angle(p2,p3,p1));
	}else if(mouseY > circle.ctrY && mouseY < y90){
	cAngle = find_angle(p2,p3,p1);
	}
	console.log("mouseX " + mouseX);
	console.log("mouseY " + mouseY);
	console.log("the Angle: " + cAngle); // angle from 0 degrees to PI 3.14
	
ball1.x = circle.ctrX + Math.cos(cAngle)* circle.radius;
ball1.y = circle.ctrY + Math.sin(cAngle)* circle.radius;

ball2.x = circle.ctrX + Math.cos(cAngle + .7854)* circle.radius; // 45 degree x
ball2.y = circle.ctrY + Math.sin(cAngle + .7854)* circle.radius; //45 degree y

cAngle += ball1.speed;

ctx.fillStyle ='#eeeeee';
ctx.fillRect(0,0, canvas.width, canvas.height);
ctx.strokeStyle='#000000';
ctx.strokeRect(1,1,canvas.width - 2, canvas.height - 2)

ctx.strokeStyle ="#000000";
ctx.beginPath();
ctx.arc(ball1.x,ball1.y,15,0,Math.PI*2,true);
ctx.stroke();
ctx.closePath();

ctx.strokeStyle ="#005678";
ctx.beginPath();
ctx.arc(ball2.x,ball2.y,25,0,Math.PI*2,true);
ctx.stroke();
ctx.closePath();

ctx.strokeStyle ="#000000";
ctx.beginPath();
ctx.arc(circle.ctrX,circle.ctrY,circle.radius,0,Math.PI*2,true);
ctx.stroke();
ctx.closePath();

canv.addEventListener('mousemove', eMouseMove, false);
}	
const FRAME_RATE = 30;
var intervalTime = 1000/FRAME_RATE;
setInterval(draw, intervalTime);
}
</script>
</body>
</HTML>