<!DOCTYPE HTML>
<html lang ="en">
<head>
<meta charset="utf-8">
<title>Lawn Czar </title>
<style = "text/css">
div.ctrcvs{
position:absolute;
left:0px;
top:0px;
padding:0px;
z-index:5;
margin:0;
height: 100%;
width:100%;
border:2px solid #FF7400;
}
.cvscss{
margin:0px;
padding:0px;

}
 html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100%; z-index: -1 }
</style>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSQ_lEToEfCqYF8a3_vmyaiSoj9fAXiXc&sensor=true"></script>
<script = "text/Javascript">
window.addEventListener('load',initialize, false);

function initialize() {
	 geocoder = new google.maps.Geocoder();
        var mapOptions = {
		disableDefaultUI: true,
          center: new google.maps.LatLng(32.7153, -117.1564),
          zoom: 14,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var czarmap = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
			document.getElementById("button").addEventListener("click", hr_pins, false);
      
    

function hr_pins(){


var reqCall = new XMLHttpRequest();
reqCall.open("GET", "scripts/lawnczar_marker_data.php", true);
reqCall.setRequestHeader("Content-Type", "application/json");
reqCall.onreadystatechange = function(){
if(reqCall.readyState == 4 && reqCall.status == 200){
var data = JSON.parse(reqCall.responseText);
//alert(data);

for(var obj in data){
var pinpoint = [];
pinpoint[obj] = data[obj].address + " " + data[obj].city +", "+ data[obj].state +" "+ data[obj].zip;
//alert(pinpoint[obj]);
geocoder.geocode({'address': pinpoint[obj]}, function(results, status){
if(status == google.maps.GeocoderStatus.OK){
i = 0;
myLatLng = [];
myLatLng[i] = results[0].geometry.location;
//alert(myLatLng[i]);
czarmap.setCenter(results[0].geometry.location);
marker = new google.maps.Marker({
map: czarmap,
position: myLatLng[i]});
console.log(marker);
}else{
alert('you got problems: ' + status);
}
//console.log(marker);
//console.log(marker.postion);
});
}
}
}
reqCall.send(null);
document.getElementById("ctrcvs").innerHTML = "processing information....";
}

}
</script>

</head>
<body>
    <div id="map_canvas" style="width:100%; height:100%"></div>
	<div  class = "ctrcvs" id="ctrcvs">
	<button id="button">slide</button>
	</div>
</body>
</html>